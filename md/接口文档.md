foggieV-client 启动server<br>
工程目录下执行命令
> export NODE_ENV=development<br>
> node --experimental-fetch server.js

# 获取链Id
接口类型：HTTP<br>
GET
http://127.0.0.1:3000/order/get_chain_id <br>
入参：NA

返回数据示例：
``` json
{"code":200,"msg":"成功","data":"4d1fb981dd562d2827447dafa89645622bdcd4e29185d60eeb45539f25d2d85d","time":1681192340411}
```
链id 取data

# 获取基准价格
接口类型：HTTP<br>
GET<br>
http://127.0.0.1:3000/order/get_table_rows<br>
入参：NA
返回数据示例：
``` json
{"code":200,"msg":"成功","data":"0.01100000000000000","time":1681200178436}
```
基准价格 取 data，单位DMC

# 获取订单筛选列表
接口类型：HTTP<br>
http://127.0.0.1:3000/order/outstanding_orders<br>
POST，content-type:json<br>
入参：<br>
|参数名|数据类型|是否可为空|备注|
|-|:------|:-----|:-----|
|email|string|否|foggie邮箱|
|chainId|string|否|chainId|
|benchmarkPrice|string|否|基准价格，单位DMC|
|unmatchedAmount|int|否|pst数量|
|period|int|否|购买周期，单位 周|
|minPrice|string|是|最低价，单位DMC|
|maxPrice|string|是|最高价，单位DMC|

入参示例：
``` json
{"unmatchedAmount":1,"period":24,"minPrice":0.0011,"benchmarkPrice":"0.0100","maxPrice":0.0123,"email":"tianbao.liu@megaops.net"}
```
返回数据示例：
``` json
{
"code": 200,
"msg": "成功",
"data": [
{
"owner": "testohsrk1fm",
"state": "active",
"created_time": "2023-03-23T02:45:48.000Z",
"unmatched_amount": "7",
"matched_amount": "293",
"id": "118",
"price": "110",
"createdAt": "2023-03-23T02:45:54.000Z",
"expire_on": "2024-03-21T02:45:46.000Z",
"deposit_ratio": "2",
"maker": {
"benchmark_stake_rate": 550
}
},
{
"owner": "testohsrk1fm",
"state": "active",
"created_time": "2023-03-29T06:48:06.000Z",
"unmatched_amount": "15",
"matched_amount": "5",
"id": "139",
"price": "110",
"createdAt": "2023-03-29T06:48:12.000Z",
"expire_on": "2024-01-25T06:48:03.000Z",
"deposit_ratio": "1",
"maker": {
"benchmark_stake_rate": 550
}
},
{
"owner": "datamall",
"state": "active",
"created_time": "2023-03-30T07:29:37.000Z",
"unmatched_amount": "34",
"matched_amount": "66",
"id": "152",
"price": "110",
"createdAt": "2023-03-30T07:29:42.000Z",
"expire_on": "2023-09-30T07:29:36.000Z",
"deposit_ratio": "0",
"maker": {
"benchmark_stake_rate": 8800
}
},
{
"owner": "datamall",
"state": "active",
"created_time": "2023-03-30T06:48:31.000Z",
"unmatched_amount": "100",
"matched_amount": "0",
"id": "150",
"price": "110",
"createdAt": "2023-03-30T06:48:36.000Z",
"expire_on": "2023-09-30T06:48:27.000Z",
"deposit_ratio": "0",
"maker": {
"benchmark_stake_rate": 8800
}
},
{
"owner": "testohsrk1fm",
"state": "active",
"created_time": "2023-03-23T03:31:19.000Z",
"unmatched_amount": "16",
"matched_amount": "4",
"id": "120",
"price": "111",
"createdAt": "2023-03-23T03:31:24.000Z",
"expire_on": "2024-03-22T03:31:14.000Z",
"deposit_ratio": "5",
"maker": {
"benchmark_stake_rate": 550
}
}
],
"time": 1681199857555
}
```

# 买单
http://127.0.0.1:3000/order/buy<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|-|:------|:-----|:-----|
|email|string|否|foggie邮箱地址，用于获取私钥|
|chainId|string|否|chainId|
|billId|string|否|挂单的id|
|period|string|否|购买周期，大于等于24|
|benchmarkPrice|string|否|基准价格，单位DMC|
|priceRange|int|否|1  基准价格正负浮动20% ； 2 基准价格正负浮动30% ；3 不限制价格|
|unmatchedAmount|string |否|购买PST数量|
|totalPrice|string|否|总价，单位 DMC|

入参示例：
``` json
{"chainId":"bb6e31180359e169335481bad672aadf57cfb5787379bedb6a5dce916fcb0ac5","email":"tianbao.liu@megaops.net","billId":"11","period":24,"benchmarkPrice":"1.00000000000000000","unmatchedAmount":"1","totalPrice":"25.0000","priceRange":3}
```
返回数据：
code 200 成功， 20007 同步订单信息至注册中心失败，需要弹框提示 点击重试调用同步订单接口 /order/sync<br>

返回数据示例：
``` json
{"code":200,"msg":"成功","time":1681199857555}
```

# 同步订单至注册中心
http://127.0.0.1:3000/order/sync<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|-|:------|:-----|:-----|
|email|string|否|foggie邮箱地址，用于获取私钥|
|billId|string|否|挂单的id|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","billId":"11"}
```
返回数据：
code 200 成功， 20007 同步订单信息至注册中心失败，需要弹框提示 点击重试调用同步订单接口， 20000 买单失败<br>

返回数据示例：
``` json
{"code":200,"msg":"成功","time":1681199857555}
```

# 获取用户的订单列表
http://127.0.0.1:3000/order/list<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|-|:------|:-----|:-----|
|email|string|否|foggie邮箱|
|pageNum|int|是|页数，默认1|
|limit|int|是|每页展示条数，默认 10|

入参示例：
``` json
{"limit":10,"pageNum":1,"email":"tianbao.liu@megaops.net"}
```

返回值示例
``` json
{
    "code":200,
    "msg":"成功",
    "data":{
        "count":13,
        "list":[
            {
                "id":"125",
                "user":{
                    "id":"tianbao12345"
                },
                "miner":{
                    "id":"testohsrk1fm"
                },
                "bill":{
                    "id":"139"
                },
                "created_time":"2023-04-11T08:19:56.000Z",
                "epoch":24,
                "user_pledge_amount":"0.2530",
                "miner_lock_pst_amount":"1",
                "miner_lock_dmc_amount":"0.3025",
                "price_amount":"0.0110",
                "settlement_pledge_amount":"0.0000",
                "lock_pledge_amount":"0.0110",
                "state":0,
                "deliver_start_date":"1970-01-01T00:00:00.000Z",
                "latest_settlement_date":"1970-01-01T00:00:00.000Z",
                "miner_lock_rsi_amount":"0.0000",
                "miner_rsi_amount":"0.0000",
                "user_rsi_amount":"0.0000",
                "deposit_amount":"0.0110",
                "deposit_valid":"1970-01-01T00:00:00.000Z",
                "cancel_date":"1970-01-01T00:00:00.000Z",
                "createdAt":"2023-04-11T08:20:00.000Z"
            },
            {
                "id":"122",
                "user":{
                    "id":"tianbao12345"
                },
                "miner":{
                    "id":"testohsrk1fm"
                },
                "bill":{
                    "id":"118"
                },
                "created_time":"2023-04-06T11:33:36.000Z",
                "epoch":24,
                "user_pledge_amount":"0.0000",
                "miner_lock_pst_amount":"1",
                "miner_lock_dmc_amount":"0.0000",
                "price_amount":"0.0110",
                "settlement_pledge_amount":"0.0000",
                "lock_pledge_amount":"0.0000",
                "state":5,
                "deliver_start_date":"1970-01-01T00:00:00.000Z",
                "latest_settlement_date":"1970-01-01T00:00:00.000Z",
                "miner_lock_rsi_amount":"0.0000",
                "miner_rsi_amount":"0.0000",
                "user_rsi_amount":"0.0000",
                "deposit_amount":"0.0000",
                "deposit_valid":"1970-01-01T00:00:00.000Z",
                "cancel_date":"2023-04-06T11:42:05.000Z",
                "createdAt":"2023-04-06T11:33:42.000Z"
            },
            {
                "id":"120",
                "user":{
                    "id":"tianbao12345"
                },
                "miner":{
                    "id":"testohsrk1fm"
                },
                "bill":{
                    "id":"118"
                },
                "created_time":"2023-04-04T06:41:31.000Z",
                "epoch":24,
                "user_pledge_amount":"0.2530",
                "miner_lock_pst_amount":"1",
                "miner_lock_dmc_amount":"0.3025",
                "price_amount":"0.0110",
                "settlement_pledge_amount":"0.0000",
                "lock_pledge_amount":"0.0110",
                "state":0,
                "deliver_start_date":"1970-01-01T00:00:00.000Z",
                "latest_settlement_date":"1970-01-01T00:00:00.000Z",
                "miner_lock_rsi_amount":"0.0000",
                "miner_rsi_amount":"0.0000",
                "user_rsi_amount":"0.0000",
                "deposit_amount":"0.0220",
                "deposit_valid":"1970-01-01T00:00:00.000Z",
                "cancel_date":"1970-01-01T00:00:00.000Z",
                "createdAt":"2023-04-04T06:41:36.000Z"
            }
        ]
    },
    "time":1681281107311
}
``` 

页面展示：
|字段名|字段描述|取值示例|备注|
|:---|:---|:---|:---|
|id|成交单号|{"id":"120",...}||
|created_time|成交时间|{"created_time":"2023-04-04T06:41:31.000Z",}|取值是UTC时间，需要根据当前时区展示时间，格式为yyyy-MM-dd HH:mm:ss|
|miner_lock_pst_amount|成交数量|{"miner_lock_pst_amount":"1",}|单位 PST|
|price|单价|{"price_amount":"0.0110",}|price_amount / miner_lock_pst_amount，单位 DMC|
|state|订单状态|{"state":0}|OrderStateWaiting = 0, //0: 订单未共识，等待中<br>OrderStateDeliver = 1, //1: 订单状态交付中<br>OrderStatePreEnd = 2, //2: 没有足够的预存金，订单即将结束<br>OrderStatePreCont = 3, //3: 有足够的预存金，订单下个周期依然处于交付中<br>OrderStateEnd = 4, // 4: 订单已经结束<br>OrderStateCancel = 5, //5: 订单已取消<br>OrderStatePreCancel = 6 //6: 订单下个周期将要取消|

# 根据订单id获取订单信息
http://127.0.0.1:3000/order/id<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|-|:------|:-----|:-----|
|orderId|string|否|订单id|
|email|string|否|foggie邮箱|

入参示例：
``` json
{"orderId":"10","email":"tianbao.liu@megaops.net"}
```

返回值示例
``` json
{
    "code": 200,
    "msg": "success",
    "data": [
        {
            "id": "10",
            "user": {
                "id": "tbliuca12345"
            },
            "miner": {
                "id": "ljktest12345"
            },
            "bill": {
                "id": "17"
            },
            "created_time": "2023-04-27T07:34:40.000Z",
            "epoch": 24,
            "user_pledge_amount": "22.9000",
            "miner_lock_pst_amount": "1",
            "miner_lock_dmc_amount": "60.0000",
            "price_amount": "1.0000",
            "settlement_pledge_amount": "0.0000",
            "lock_pledge_amount": "1.0000",
            "state": 1,
            "deliver_start_date": "2023-04-27T07:44:14.000Z",
            "latest_settlement_date": "2023-04-27T07:44:14.000Z",
            "miner_lock_rsi_amount": "0.0000",
            "miner_rsi_amount": "0.0000",
            "user_rsi_amount": "0.0000",
            "deposit_amount": "1.0000",
            "deposit_valid": "2023-04-27T11:44:14.000Z",
            "cancel_date": "1970-01-01T00:00:00.000Z",
            "createdAt": "2023-04-27T07:34:42.000Z"
        }
    ],
    "time": 1682606943524
}
``` 

页面展示：
|字段名|字段描述|取值示例|备注|
|:---|:---|:---|:---|



# 提交merkle树
http://127.0.0.1:3000/order/push_merkle<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|chainId|string|否|公链id|
|email|string|否|foggie邮箱地址，用于获取私钥|
|orderId|string|否|订单id|

入参示例：
``` json
{"chainId":"4d1fb981dd562d2827447dafa89645622bdcd4e29185d60eeb45539f25d2d85d","email":"tianbao.liu@megaops.net", "orderId":"231"}
```

返回数据示例：
``` json
{
"code": 200,
"msg": "success",
"time": 1681718819856
}
```

# 获取提交merkle树列表
http://127.0.0.1:3000/order/push_merkle_record<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie邮箱|
|orderId|string|否|订单id|
|pageSize|int|否|每页条数，默认为10|
|pageNo|int|否|默认 1|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","orderId":"158","pageSize":4,"pageNo":1}
```

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "data": {
        "list": [
            {
                "order_id": "158",
                "username": "tianbao12345",
                "merkle_root": "321a9d3eca469197c0eee7ab06a5d9de10dfe456509b2b222cdb8e9b45effc20",
                "block_num": 100,
                "transaction_id": "4868ba6ff9ea40d5739fe20deba16421a8cfdc763ef74fad03ad7f3bb4e78318",
                "update_time": "2023-04-24 21:25:58",
                "create_time": "2023-04-24 21:25:58",
                "_id": "Jc0TndFbaBlTVd60"
            }
        ],
        "count": 1
    },
    "time": 1682342987501
}
```

# 获取订单的挑战列表
http://127.0.0.1:3000/order/challenge_list<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|orderId|string|否|订单id|
|email|string|否|foggie邮箱|
|pageNum|int|是|页数，默认1|
|limit|int|是|每页展示条数，默认 10|

入参示例：
``` json
{"pageNum":2,"limit":10,"orderId":"156","email":"tianbao.liu@megaops.net"}
```

返回值示例
``` json
{
"code": 200,
"msg": "success",
"data": [
{
"pre_merkle_root": "0000000000000000000000000000000000000000000000000000000000000000",
"pre_data_block_count": 0,
"merkle_root": "930c55135daa73c89c6b639e7cd254e36722dbc7d7b53f1ddfced32a1e5be833",
"data_block_count": 12,
"merkle_submitter": "dmc.token",
"data_id": 1,
"hash_data": "b0d5eb95a5bb215ab74bb1f0fc695134dbdd6a7a596b16e51355f26639cb58d3",
"challenge_times": 1,
"nonce": "cid",
"state": 3,
"user_lock_amount": "0.0100",
"miner_pay_amount": "0.0000",
"challenge_date": "2023-04-21T02:27:45.000Z",
"created_time": "2023-04-21T02:24:56.000Z",
"order": {
"id": "156"
},
"challenger": {
"id": "tianbao12345"
}
}
],
"time": 1682045481003
}
```
```c
//返回值中 state 的数字所代表的的含义
enum e_challenge_state {
    ChallengePrepare = 0, //0: 未提交默克尔树根，等待阶段
    ChallengeConsistent = 1,//1: 提交了一致的默克尔树根
    ChallengeCancel = 2, //2: 挑战取消，目前不存在此情况
    ChallengeRequest = 3, // 3: 用户发起存储挑战
    ChallengeAnswer = 4, // 4: 矿工成功响应挑战
    ChallengeArbitrationMinerPay = 5, //5: 矿工仲裁成功，矿工为过错方
    ChallengeArbitrationUserPay = 6, //6: 矿工仲裁成功，用户为过错方
    ChallengeTimeout = 7, //7: 挑战超时，矿工赔付
};
```

# 加密用户的订单信息
http://127.0.0.1:3000/user/encode_user_order<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|orderId|int|否|订单id|
|email|string|否|foggie邮箱地址|

入参示例：
``` json
{"orderId":"231","email":"tianbao.liu@megaops.net"}
```
返回数据示例：
``` json
{
"code": 200,
"msg": "成功",
"data": "NUoySjI3UVNSaFg0eVhheERyYkEydzFSb1djaUZWNEo5Z2RRTnoxZlVHeE4xQmhKOTN6OnRpYW5iYW8xMjM0NToyMzE=",
"time": 1681284228509
}
```
# 校验用户的登录状态
http://127.0.0.1:3000/user/validate_user_login<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie邮箱地址|

返回数据:
|字段名|字段类型|字段描述|备注|
|:---|:---|:---|:---|
|code|int|200: 成功；<br>10001 密码不存在；<br>10007 私钥不存在；<br>10002 密码和私钥都存在|校验顺序先密码后私钥，密码不存在的情况下，页面展示两个密码输入框，参考钱包页面；<br>密码存在私钥不存在的情况下，展示导入私钥的输入框；<br>密码和私钥都存在的情况下，页面展示一个密码输入框，输入密码后，校验密码（调用校验密码的接口）|
|msg|string|错误信息||	

返回数据示例：
``` json
{
"code": 10002,
"msg": "password is exist",
"time": 1681527830016
}
```

# 校验密码
http://127.0.0.1:3000/user/validate_password<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|字段名|字段类型|是否可以为空|备注|
|:---|:---|:---|:---|
|password|string|否|明文密码|
|email|string|否|foggie的邮箱|
入参示例
``` json
{"email":"tianbao.liu@megaops.net","password":"123456789"}
```

返回数据:
|字段名|字段类型|字段描述|备注|
|:---|:---|:---|:---|
|data|string|密文密码|密文密码，作为获取私钥的入参|

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "data": {
        "encryptedPassword": "73d6fd1b3ce399406ca6f3baf1a763ccd4e8222593dcda6fd86d6bc16d5d79ea"
    },
    "time": 1682325671395
}
```

# 保存密码
http://127.0.0.1:3000/user/save_password<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|字段名|字段类型|是否可以为空|备注|
|:---|:---|:---|:---|
|password|string|否|明文密码|
|email|string|否|foggie的邮箱|
|username|string|否|用户名|
入参示例
``` json
{"password":"123456789","email":"tianbao.liu@megaops.net","username":"tianbaoca123"}
```

返回数据:
|字段名|字段类型|字段描述|备注|
|:---|:---|:---|:---|
|data|string|密文密码|密文密码，作为获取私钥的入参|

返回数据示例：
``` json
{
"code": 1,
"msg": "success",
"data": "58df9379402ab6c87a51be426290e0f752ba5be4fe45736674a05dc12e642c50",
"time": 1681536928928
}
```

# 重置密码
http://127.0.0.1:3000/user/reset_password<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|字段名|字段类型|是否可以为空|备注|
|:---|:---|:---|:---|
|password|string|否|明文密码|
|email|string|否|foggie的邮箱|
|username|string|否|用户名|
入参示例：
``` json
{"password":"123456789","email":"tianbao.liu@megaops.net","username":"tianbaoca123"}
```

返回数据:
|字段名|字段类型|字段描述|备注|
|:---|:---|:---|:---|
|data|string|密文密码|密文密码，作为获取私钥的入参|

返回数据示例：
``` json
{
"code": 1,
"msg": "success",
"data": "Ei9zbIkj5OQ98XrF",
"time": 1681536928928
}
```

# 导入私钥
http://127.0.0.1:3000/user/import_private_key<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|字段名|字段类型|是否可以为空|备注|
|:---|:---|:---|:---|
|privateKey|string|否|明文私钥|
|email|string|否|foggie邮箱地址|

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "time": 1682325544947
}
```

# 用户领取收益
http://127.0.0.1:3000/user/claim_order<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|chainId|string|否|公链id|
|email|string|否|foggie邮箱地址|
|orderId|string|否|订单id|

入参示例：
``` json
{"chainId":"4d1fb981dd562d2827447dafa89645622bdcd4e29185d60eeb45539f25d2d85d","email":"tianbao.liu@megaops.net", "orderId":"231"}
```

返回数据示例：
``` json
{
"code": 200,
"msg": "success",
"time": 1681718819856
}
```

# 保存文件信息
http://127.0.0.1:3000/file/save<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie邮箱|
|orderId|string|否|订单id|
|filePath|string|否|文件的绝对路径|
|fileSize|string|否|文件大小，单位Bytes|
|md5|string|否|文件内容的md5|
|deviceType|string|否|设备类型 1 foggie 2 foggieMax 3 用户客户端|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","orderId":"123","filePath":"opt/asd/vvff","fileSize":"1111","md5":"123456789"}
```

返回数据示例：
``` json
{
"code": 1,
"msg": "success",
"data": "tI5EAvbXE7fUJLFu",
"time": 1681400612781
}
```

# 获取文件列表
http://127.0.0.1:3000/file/list<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie邮箱|
|deviceType|string|否|设备类型 1 foggie 2 foggieMax 3 用户客户端|
|orderId|string|否|订单id|
|pageSize|int|否|每页条数，默认为10|
|pageNo|int|否|默认 1|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","orderId":"28","pageSize":50,"pageNo":1,"deviceType":"3"}
```

返回数据示例：
``` json
{
    "code":200,
    "msg":"success",
    "data":{
        "code":200,
        "msg":"success",
        "data":{
            "list":[
                {
                    "order_id":"28",
                    "email":"tianbao.liu@megaops.net",
                    "file_path":"%E5%9F%BA%E4%BA%8Elibvirtd%E7%9A%84%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86_20220508.zip",
                    "file_size":3930190,
                    "md5":"6f7b141cd5e655d04111e0c8dceb2d36",
                    "device_type":"3",
                    "update_time":"2023-05-04 16:22:33",
                    "create_time":"2023-05-04 16:22:33",
                    "_id":"P9ETCJlpaBfdogSH"
                },
                {
                    "order_id":"28",
                    "email":"tianbao.liu@megaops.net",
                    "file_path":"%E5%88%98%E5%A4%A9%E5%AE%9D_20220526.docx",
                    "file_size":1751635,
                    "md5":"fc7a25cb5c99d7a92d27f2ab0ab497c1",
                    "device_type":"3",
                    "update_time":"2023-05-04 16:13:46",
                    "create_time":"2023-05-04 16:13:46",
                    "_id":"9Kdj5RCVCiPkcgT0"
                },
                {
                    "order_id":"28",
                    "email":"tianbao.liu@megaops.net",
                    "file_path":"%E5%9F%BA%E4%BA%8Elibvirtd%E7%9A%84%E8%99%9A%E6%8B%9F%E5%8C%96%E7%AE%A1%E7%90%86%E5%B9%B3%E5%8F%B0%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0-%E6%8F%90%E7%BA%B2_2021-05-14-2.doc",
                    "file_size":108544,
                    "md5":"d41723a50056c4f094db9989394f6381",
                    "device_type":"3",
                    "update_time":"2023-05-04 15:38:44",
                    "create_time":"2023-05-04 15:38:44",
                    "_id":"yJJ7MCk7K9MMeY1v"
                },
                {
                    "order_id":"28",
                    "email":"tianbao.liu@megaops.net",
                    "file_path":"paper.zip",
                    "file_size":13347423,
                    "md5":"2ba81841cbfc913cf6e7f8bc7a854cf7",
                    "device_type":"3",
                    "update_time":"2023-05-04 14:58:01",
                    "create_time":"2023-05-04 14:58:01",
                    "_id":"dad2igkpx0J6Xu2L"
                }
            ],
            "count":4
        },
        "time":1683189201145
    },
    "time":1683189201145
}
```

# 上传文件
http://127.0.0.1:3000/file/upload<br>
接口类型：HTTP<br>
POST，Content-Type:  multipart/form-data;<br>

入参：<br>
入参放在body中<br>
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|fileCategory|int|否|上传文件类别，1 上传小文件（<= 10MB） 2 上传大文件（>10MB）|
|email|string|否|foggie邮箱|
|deviceType|string|否|设备类型 1 foggie 2 foggieMax 3 用户客户端|
|fileName|string|否|文件名|
|md5|string|否|文件内容的md5|
|fileType|string|是（大文件）、否（小文件）|文件类型，小文件不能为空，大文件可以为空|
|fileSize|long|否|文件大小，单位Bytes|
|orderId|string|否|订单id|
|partId|long|否（大文件）、是（小文件）|文件分片id|
|uploadId|string|否（大文件）、是（小文件）|创建文件时获取的uploadId|
|wholeMd5|string|否（大文件）、是（小文件）|整个文件的md5，小文件与md5一致，大文件是整个文件的md5|
|wholeFileSize|long|否（大文件）、是（小文件）|整个文件的大小|
|minOffset|long|否（大文件）、是（小文件）|分片的文件在大文件的起始位置|
|maxOffset|long|否（大文件）、是（小文件）|分片的文件在大文件的结束位置|
|file|file|否|文件的二进制流|

入参示例：NA<br>

返回数据：
``` json
{
"code": 200,
"msg": "success",
"time": 1681783457295
}
```

# 创建文件
http://127.0.0.1:3000/file/create<br>
接口类型：HTTP<br>
POST，content-type:json<br>
入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie邮箱|
|deviceType|string|否|设备类型 1 foggie 2 foggieMax 3 用户客户端|
|fileName|string|否|文件的绝对路径|
|md5|string|否|文件内容的md5|
|fileSize|long|否|文件size，单位 Bytes|
|fileType|string|否|文件类型，文件名的后缀|
|orderId|string|否|订单id|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","fileName":"Users/carl/Documents/foggie.pages","md5":"114cc4641fc49b909126973f6343c243","fileSize":95853,"fileType":"pages", "orderId":"231"}
```

返回数据：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|code|int|否|200:成功<br>30004：创建文件失败|
|data|string|否|文件的uploadId|

返回数据示例：
``` json
{
"code": 200,
"msg": "success",
"data": "f93346b6dd4a60a4fd30987e6266065e736124a0b9ec292a",
"time": 1681718819856
}
```

# 文件上传完成后的提交
http://127.0.0.1:3000/file/complete<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|fileName|string|否|文件名，包含文件路径|
|parts|JSONArray|否|文件上传的分片信息，格式: [{"partNumber":123445,"etag":"adw1231"}]|
|uploadId|string|否|文件上传的id|
|orderId|string|否|订单id|
|md5|string|否|大文件内容的md5|
|fileSize|long|否|大文件大小，单位Bytes|

入参示例：
``` json
{"fileName":"Users/carl/Documents/foggie.pages","parts":"[{\"partNumber\":123445,\"etag\":\"adw1231\"}]","uploadId":"f93346b6dd4a60a4fd30987e6266065e736124a0b9ec292a","orderId":"231","md5":"114cc4641fc49b909126973f6343c243","fileSize":95853}
```

返回数据：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|code|int|否|200:成功<br>30009：提交文件失败<br>30021：获取文件上传记录失败<br>30014：构建merkle树失败<br>30020：更新密码本失败|
|data|string|否|文件的uploadId|

返回数据示例：
``` json
{
"code": 200,
"msg": "success",
"data": "f93346b6dd4a60a4fd30987e6266065e736124a0b9ec292a",
"time": 1681718819856
}
```

# 发起挑战
http://127.0.0.1:3000/file/req_challenge<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|chainId|string|否|公链id|
|email|string|否|foggie邮箱地址，用于获取私钥|
|orderId|string|否|订单id|
|md5|string|否|文件内容的md5|

入参示例：
``` json
{"chainId":"4d1fb981dd562d2827447dafa89645622bdcd4e29185d60eeb45539f25d2d85d","email":"tianbao.liu@megaops.net", "orderId":"231", "md5":"114cc4641fc49b909126973f6343c243"}
```

返回数据示例：
``` json
{
"code": 200,
"msg": "success",
"time": 1681718819856
}
```

# 转账
http://127.0.0.1:3000/assets/transfer<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|chainId|string|否|公链id|
|email|string|否|foggie邮箱地址，用于获取私钥|
|to|string|否|目标钱包地址|
|amount|string|否|转账金额，单位 DMC，精确保留小数后4位 例如："1.0234"|
|memo|string|是|转账备注|

入参示例：
``` json
{"chainId":"bb6e31180359e169335481bad672aadf57cfb5787379bedb6a5dce916fcb0ac5","email":"tianbao.liu@megaops.net","to":"ljktest12345","memo":"test","amount":"1.1211"}
```

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "data": {
        "code": 200,
        "msg": "success",
        "data": "f79c6ecae6f549e6c16a3a90bd81cc3bb60673b9b7bb3b4f00ea597c98a0c0c6",
        "time": 1683216393243
    },
    "time": 1683216393243
}
```

# 获取订单中的资产列表
http://127.0.0.1:3000/assets/list_in_order<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|orderId|string|否|订单id|
|limit|int|是|每页条数，默认10|
|pageNum|int|是|页数，默认1|

入参示例：
``` json
{"orderId":"34","limit":2,"pageNum":1}
```

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "data": {
        "code": 200,
        "msg": "success",
        "data": {
            "count": 3,
            "list": [
                {
                    "change_amount": "25.0000",
                    "change_symbol": "DMC@datamall",
                    "acc_type": 1,
                    "rec_type": 1,
                    "create_time": "2023-05-04T13:29:17.000Z",
                    "createdAt": "2023-05-04T13:29:18.000Z",
                    "updatedAt": "2023-05-04T13:29:18.000Z",
                    "id": 131
                },
                {
                    "change_amount": "-1.0000",
                    "change_symbol": "DMC@datamall",
                    "acc_type": 1,
                    "rec_type": 3,
                    "create_time": "2023-05-04T13:29:17.000Z",
                    "createdAt": "2023-05-04T13:29:18.000Z",
                    "updatedAt": "2023-05-04T13:29:18.000Z",
                    "id": 132
                }
            ]
        },
        "time": 1683271132252
    },
    "time": 1683271132252
}
```

# 获取用户的资产列表
http://127.0.0.1:3000/assets/list_in_user<br>
接口类型：HTTP<br>
POST，content-type:json<br>

入参：
|参数名|数据类型|是否可为空|备注|
|:---|:---|:---|:---|
|email|string|否|foggie的邮箱|
|limit|int|是|每页条数，默认10|
|pageNum|int|是|页数，默认1|

入参示例：
``` json
{"email":"tianbao.liu@megaops.net","limit":1,"pageNum":1}
```

返回数据示例：
``` json
{
    "code": 200,
    "msg": "success",
    "data": {
        "code": 200,
        "msg": "success",
        "data": {
            "count": 37,
            "list": [
                {
                    "account_from": {
                        "id": "tbliuca12345"
                    },
                    "account_to": null,
                    "contract_action": "dmc.token/assetrec",
                    "action": {
                        "rawData": {
                            "action_ordinal": "14",
                            "creator_action_ordinal": "1",
                            "closest_unnotified_ancestor_action_ordinal": "1",
                            "receipt": {
                                "receiver": "dmc.token",
                                "act_digest": "b8f98d6fb03bbc272970c712848fc5863c567e614145ac5337ee31a3f9624c3f",
                                "global_sequence": "4243667",
                                "recv_sequence": "70074",
                                "auth_sequence": [
                                    [
                                        "dmc.token",
                                        "819"
                                    ]
                                ],
                                "code_sequence": "2",
                                "abi_sequence": "2"
                            },
                            "receiver": "dmc.token",
                            "act": {
                                "account": "dmc.token",
                                "name": "assetrec",
                                "authorization": [
                                    {
                                        "actor": "dmc.token",
                                        "permission": "active"
                                    }
                                ],
                                "data": {
                                    "order_id": "36",
                                    "changed": [
                                        {
                                            "quantity": "26.0000 DMC",
                                            "contract": "datamall"
                                        }
                                    ],
                                    "owner": "tbliuca12345",
                                    "rec_type": "1"
                                },
                                "hex_data": "240000000000000001a0f703000000000004444d4300000000000000311a69b24950c810c120ede2c901"
                            },
                            "context_free": false,
                            "elapsed": "20",
                            "console": "",
                            "trx_id": "28a76e66c6e85d1da3d4596ab1c2bc14778e4493459e0bed0ee02938f7df6c6a",
                            "block_num": "4173165",
                            "block_time": "2023-05-05T07:41:01.000",
                            "producer_block_id": "003fad6d76f7306c4176754417aef7b1ad87c7f59ba8d4324f8a8fc3e614f01b",
                            "account_ram_deltas": [],
                            "except": null,
                            "error_code": null,
                            "return_value_hex_data": ""
                        }
                    },
                    "id": 915,
                    "createdAt": "2023-05-05T07:41:06.000Z"
                }
            ]
        },
        "time": 1683275225006
    },
    "time": 1683275225006
}
```